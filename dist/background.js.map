{"version":3,"file":"background.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://csinvestextensionreact/./src/background/background.ts"],"sourcesContent":["chrome.runtime.onMessage.addListener(({ action, itemInfos }, sender, sendResponse) => {\r\n  function saveItemToDatabase(itemDetails, loginInfos) {\r\n    fetch(\"https://cs-invest-2.vercel.app/api/item/create\", {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        userId: loginInfos.id,\r\n        sellTax: loginInfos.sellTax,\r\n        name: itemDetails.itemName,\r\n        buyPrice: itemDetails.itemValue\r\n      })\r\n    })\r\n      .then(() => sendResponse({ message: \"Items salvos no CsInvest com sucesso!\" }))\r\n      .catch(() => sendResponse({ message: \"Falha ao salvar items no CsInvest\" }));\r\n  }\r\n\r\n  if (action === 'saveItem') {\r\n    chrome.storage.local.get('login', (result) => {\r\n      const loginInfos = result.login;\r\n\r\n      if (!loginInfos) {\r\n        sendResponse({ message: \"Falha com login do CsInvest.\" });\r\n        return;\r\n      }\r\n\r\n      if (!itemInfos) {\r\n        sendResponse({ message: \"Nenhum item encontrado.\" });\r\n        return;\r\n      }\r\n\r\n      itemInfos.forEach((item) => {\r\n        saveItemToDatabase(item, loginInfos);\r\n      });\r\n    });\r\n\r\n    // Retorna true para indicar que a resposta será enviada de forma assíncrona\r\n    return true;\r\n  }\r\n});\r\n"],"names":[],"sourceRoot":""}